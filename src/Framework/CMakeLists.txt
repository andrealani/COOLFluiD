IF ( NOT CF_HAVE_SINGLE_EXEC )
SET ( MYLIBNAME "Framework" )
ELSE ()
SET ( MYLIBNAME "coolfluid-solver" )
ENDIF()

LIST ( APPEND Framework_files
AbsoluteNormAndMaxIter.cxx
AbsoluteNormAndMaxIter.hh
BadFormatException.hh
BaseCFMeshFileSource.cxx
BaseCFMeshFileSource.hh
BaseDataSocketSink.cxx
BaseDataSocketSink.hh
BaseDataSocketSource.cxx
BaseDataSocketSource.hh
BaseGeometricEntityProvider.hh
BaseGeometricEntityProvider.cxx
BaseMethodCommandProvider.hh
BaseMethodStrategyProvider.hh
BaseSetupFVMCC.hh
BaseSetupFVMCC.ci
BaseTerm.hh
BlockAccumulator.cxx
BlockAccumulator.hh
BlockAccumulatorBase.hh
BlockAccumulatorBase.cxx
CallWithNoEffectException.hh
CatalycityModel.cxx
CatalycityModel.hh
CellCenteredDiffLocalApproachSparsity.cxx
CellCenteredDiffLocalApproachSparsity.hh
CellCenteredSparsity.cxx
CellCenteredSparsity.hh
Cell.hh
CellConn.hh
CellTrsGeoBuilder.cxx
CellTrsGeoBuilder.hh
CellVertexSparsity.cxx
CellVertexSparsity.hh
CellVertexSparsityNoBlock.cxx
CellVertexSparsityNoBlock.hh
CFDofType.hh
CFGeoEnt.hh
CFGeoEnt.cxx
CFGeoShape.hh
CFGeoShape.cxx
CFIntegration.hh
CFIntegration.cxx
CFL.cxx
CFL.hh
CFmeshFileReader.ci
CFmeshFileReader.hh
CFmeshFileWriter.ci
CFmeshFileWriterFluctSplitP1P2.ci
CFmeshFileWriterFluctSplitP1P2.hh
CFmeshFileWriter.hh
CFmeshReaderSource.cxx
CFmeshReaderSource.hh
CFmeshReaderWriterSource.cxx
CFmeshReaderWriterSource.hh
CFmeshWriterSource.cxx
CFmeshWriterSource.hh
CFPolyOrder.hh
CFPolyOrder.cxx
CFPolyForm.hh
CFPolyForm.cxx
CFQuadrature.hh
CFQuadrature.cxx
CFSide.hh
CollaboratorAccess.cxx
CollaboratorAccess.hh
CollaboratorException.hh
CommandGroup.cxx
CommandGroup.hh
CommandsToTRSMapper.cxx
CommandsToTRSMapper.hh
ComputeAllNorms.cxx
ComputeAllNorms.hh
ComputeCFL.hh
ComputeDummyStates.hh
ComputeDummyStates.cxx
ComputeDT.hh
ComputeDT.cxx
ComputeFaceNormalsFVMCC.hh
ComputeFaceNormalsHexaP1.cxx
ComputeFaceNormalsHexaP1.hh
ComputeFaceNormalsLineP1.cxx
ComputeFaceNormalsLineP1.hh
ComputeFaceNormalsPrismP1.cxx
ComputeFaceNormalsPrismP1.hh
ComputeFaceNormalsPyramP1.hh
ComputeFaceNormalsPyramP1.cxx
ComputeFaceNormalsQuadP1.cxx
ComputeFaceNormalsQuadP1.hh
ComputeFaceNormalsTetraP1.cxx
ComputeFaceNormalsTetraP1.hh
ComputeFaceNormalsTriagP1.cxx
ComputeFaceNormalsTriagP1.hh
ComputeFlux.hh
ComputeL2Norm.cxx
ComputeL2Norm.hh
ComputeNormals.hh
ComputeNorm.cxx
ComputeNorm.hh
ComputeSourceTerm.hh
ComputeTerm.hh
ConsistencyException.hh
ConstantDTWarn.cxx
ConstantDTWarn.hh
ContourIntegrator.ci
ContourIntegrator.cxx
ContourIntegrator.hh
ContourIntegratorImpl.cxx
ContourIntegratorImpl.hh
ConvectionDiffusionPM.hh
ConvectionDiffusionReactionPM.hh
ConvectionPM.hh
ConvectionReactionPM.hh
ConvectiveVarSet.cxx
ConvectiveVarSet.hh
ConvergenceMethod.cxx
ConvergenceMethodData.cxx
ConvergenceMethodData.hh
ConvergenceMethod.hh
ConvergenceStatus.hh
CouplerData.cxx
CouplerData.hh
CouplerMethod.cxx
CouplerMethod.hh
CustomSubSystem.cxx
CustomSubSystem.hh
DataBroker.hh
DataBroker.cxx
DataHandle.hh
DataHandleInternal.hh
DataHandleOutput.cxx
DataHandleOutput.hh
DataProcessing.cxx
DataProcessingData.cxx
DataProcessingData.hh
DataProcessing.hh
DataProcessingMethod.cxx
DataProcessingMethod.hh
DataSocket.cxx
DataSocketHelper.hh
DataSocket.hh
DataSocketSink.hh
DataSocketSource.hh
DataStorage.hh
DataStorage.cxx
DataStorageInternal.hh
DetermineCFL.cxx
DetermineCFL.hh
DiffusiveVarSet.cxx
DiffusiveVarSet.hh
DofDataHandleIterator.hh
DomainModel.cxx
DomainModel.hh
DynamicBalancerMethod.cxx
DynamicBalancerMethodData.cxx
DynamicBalancerMethodData.hh
DynamicBalancerMethod.hh
DynamicDataSocketSet.hh
Edge.hh
EigenSolver.hh
ElementDataArray.hh
ElementTypeData.cxx
ElementTypeData.hh
EquationFilter.hh
EquationSetData.hh
EquationSubSysDescriptor.hh
ErrorEstimatorData.cxx
ErrorEstimatorData.hh
ErrorEstimatorMethod.cxx
ErrorEstimatorMethod.hh
ExprComputeCFL.cxx
ExprComputeCFL.hh
ExprComputeDT.cxx
ExprComputeDT.hh
Face.hh
FaceCellTrsGeoBuilder.cxx
FaceCellTrsGeoBuilder.hh
FaceJacobiansDeterminant.cxx
FaceJacobiansDeterminant.hh
FaceToCellGEBuilder.cxx
FaceToCellGEBuilder.hh
FaceTrsGeoBuilder.cxx
FaceTrsGeoBuilder.hh
FileFormatChecker.cxx
FileFormatChecker.hh
FileReader.cxx
FileReader.hh
FileWriter.cxx
FileWriter.hh
FilterRHS.cxx
FilterRHS.hh
FilterState.cxx
FilterState.hh
FluxSplitter.hh
Framework.hh
FVMCCGeoDataComputer.ci
FVMCCGeoDataComputer.hh
FVMCC_BaseBC.ci
FVMCC_BaseBC.hh
FVMCC_MeshDataBuilder.cxx
FVMCC_MeshDataBuilder.hh
GaussLegendreContourIntegratorImpl.hh
GaussLegendreVolumeIntegratorImpl.hh
GeoDataComputer.ci
GeoDataComputer.hh
GeometricEntity.cxx
GeometricEntity.hh
GeometricEntityPool.hh
GeometricEntityProvider.hh
GeometricEntityRegister.cxx
GeometricEntityRegister.hh
GlobalCommTypes.hh
GlobalJacobianSparsity.cxx
GlobalJacobianSparsity.hh
GlobalMaxNumberStepsCriteria.cxx
GlobalMaxNumberStepsCriteria.hh
GlobalReduce.hh
GlobalReduceSERIAL.hh
GlobalStopCriteria.cxx
GlobalStopCriteria.hh
GlobalTypeTrait.hh
IdentityFilterRHS.cxx
IdentityFilterRHS.hh
IdentityFilterState.cxx
IdentityFilterState.hh
IdentityVarSetMatrixTransformer.cxx
IdentityVarSetMatrixTransformer.hh
IdentityVarSetTransformer.cxx
IdentityVarSetTransformer.hh
IndexedObject.ci
IndexedObject.hh
IndexList.ci
IndexList.hh
InertiaVarSet.cxx
InertiaVarSet.hh
IntegrableEntity.cxx
IntegrableEntity.hh
Integrator.ci
Integrator.hh
IntegratorImplProvider.hh
IntegratorPattern.hh
IntegratorProperties.cxx
IntegratorProperties.hh
IntegratorRegister.hh
IntegratorTypes.hh
InteractiveComputeCFL.cxx
InteractiveComputeCFL.hh
InteractiveComputeDT.cxx
InteractiveComputeDT.hh
InteractiveParamReader.cxx
InteractiveParamReader.hh
InterpolatorProperties.hh
InterpolatorRegister.cxx
InterpolatorRegister.hh
JacobianLinearizer.cxx
JacobianLinearizer.hh
Limiter.ci
Limiter.hh
LimitFilterRHS.cxx
LimitFilterRHS.hh
LinearSystemSolver.cxx
LinearSystemSolver.hh
LMaestro.cxx
LMaestro.hh
LocalCommTypes.hh
LocalConnectionDataBuilder.cxx
LocalConnectionDataBuilder.hh
LocalConnectionData.cxx
LocalConnectionData.hh
LookupInterpolator.cxx
LookupInterpolator.hh
LSSData.cxx
LSSData.hh
LSSIdxMapping.hh
LSSMatrix.cxx
LSSMatrix.hh
LSSVector.cxx
LSSVector.hh
Maestro.cxx
Maestro.hh
MapGeoEnt.cxx
MapGeoEnt.hh
MapGeoEntToFormat.cxx
MapGeoEntToFormat.hh
MapGeoToTrsAndIdx.cxx
MapGeoToTrsAndIdx.hh
MathTypes.hh
MaxComputeDT.cxx
MaxComputeDT.hh
MaxFilterState.cxx
MaxFilterState.hh
MaxNumberStepsCondition.cxx
MaxNumberStepsCondition.hh
MaxNumberSubIterCondition.cxx
MaxNumberSubIterCondition.hh
MaxTimeCondition.cxx
MaxTimeCondition.hh
MaxTimeNumberStepsCondition.cxx
MaxTimeNumberStepsCondition.hh
MeshAdapterData.cxx
MeshAdapterData.hh
MeshAdapterMethod.cxx
MeshAdapterMethod.hh
MeshCreatorBase.hh
MeshCreator.cxx
MeshCreatorData.cxx
MeshCreatorData.hh
MeshCreator.hh
MeshDataBuilder.cxx
MeshDataBuilder.hh
MeshData.cxx
MeshData.hh
MeshDataInputSource.cxx
MeshDataInputSource.hh
MeshDataSourceInterface.cxx
MeshDataSourceInterface.hh
MeshFormatConverter.cxx
MeshFormatConverter.hh
MeshStatistics.cxx
MeshStatistics.hh
MethodCommand.hh
MethodCommandProvider.hh
Method.cxx
MethodData.cxx
MethodData.hh
Method.hh
MethodRegistry.cxx
MethodRegistry.hh
MethodStrategy.hh
MethodStrategyProvider.hh
MinMaxFilterState.hh
MinMaxFilterState.cxx
MultiMethodHandle.hh
MultiMethodTuple.hh
MultiScalarTerm.hh
MultiScalarVarSetBase.hh
Namespace.cxx
NamespaceGroup.cxx
NamespaceGroup.hh
Namespace.hh
NamespaceMember.cxx
NamespaceMember.hh
NamespaceStack.ci
NamespaceStack.hh
NamespaceSwitcher.cxx
NamespaceSwitcher.hh
NegativeVolumeException.hh
NodalStatesExtrapolator.ci
NodalStatesExtrapolator.hh
Node.cxx
Node.hh
NormalsCalculator.cxx
NormalsCalculator.hh
NormAndMaxSubIter.cxx
NormAndMaxSubIter.hh
NormCondition.cxx
NormCondition.hh
NullCatalycityModel.cxx
NullCatalycityModel.hh
NullCommand.cxx
NullCommand.hh
NullComputeCFL.cxx
NullComputeCFL.hh
NullComputeDT.cxx
NullComputeDT.hh
NullComputeNorm.cxx
NullComputeNorm.hh
NullContourIntegratorImpl.cxx
NullContourIntegratorImpl.hh
NullConvergenceMethod.cxx
NullConvergenceMethod.hh
NullCouplerMethod.cxx
NullCouplerMethod.hh
NullEquationFilter.hh
NullDataProcessing.cxx
NullDataProcessing.hh
NullDiffusiveVarSet.cxx
NullDiffusiveVarSet.hh
NullDomainModel.cxx
NullDomainModel.hh
NullErrorEstimatorMethod.cxx
NullErrorEstimatorMethod.hh
NullFluxSplitter.ci
NullFluxSplitter.hh
NullGeoDataComputer.ci
NullGeoDataComputer.hh
NullInertiaVarSet.cxx
NullInertiaVarSet.hh
NullIntegrableEntity.cxx
NullIntegrableEntity.hh
NullLimiter.ci
NullLimiter.hh
NullLinearizer.cxx
NullLinearizer.hh
NullLinearSystemSolver.cxx
NullLinearSystemSolver.hh
NullMeshAdapterMethod.cxx
NullMeshAdapterMethod.hh
NullMeshCreator.cxx
NullMeshCreator.hh
NullMeshDataBuilder.cxx
NullMeshDataBuilder.hh
NullMeshFormatConverter.cxx
NullMeshFormatConverter.hh
NullOutputFormatter.cxx
NullOutputFormatter.hh
NullPhysicalModelImpl.cxx
NullPhysicalModelImpl.hh
NullPhysicalPropertyLibrary.cxx
NullPhysicalPropertyLibrary.hh
NullPolyRec.ci
NullPolyRec.hh
NullRadiationLibrary.cxx
NullRadiationLibrary.hh
NullSourceVarSet.cxx
NullSourceVarSet.hh
NullSpaceMethod.cxx
NullSpaceMethod.hh
NullStateInterpolator.cxx
NullStateInterpolator.hh
NullTRSCommand.cxx
NullTRSCommand.hh
NullVarSet.cxx
NullVarSet.hh
NullVarSetMatrixTransformer.cxx
NullVarSetMatrixTransformer.hh
NullVarSetTransformer.cxx
NullVarSetTransformer.hh
NullVolumeIntegratorImpl.cxx
NullVolumeIntegratorImpl.hh
NumericalCommand.cxx
NumericalCommand.hh
NumericalJacobian.cxx
NumericalJacobian.hh
NumericalStrategy.cxx
NumericalStrategy.hh
OnlyMeshSubSystem.cxx
OnlyMeshSubSystem.hh
OptionMethodStrategy.hh
OutputFormatter.cxx
OutputFormatterData.cxx
OutputFormatterData.hh
OutputFormatter.hh
PathAppender.cxx
PathAppender.hh
PhysicalChemicalLibrary.cxx
PhysicalChemicalLibrary.hh
PhysicalConsts.hh
PhysicalModel.cxx
PhysicalModel.hh
PhysicalModelImpl.cxx
PhysicalModelImpl.hh
PhysicalPropertyLibrary.hh
PhysicalPropertyLibrary.cxx
PolyReconstructor.ci
PolyReconstructor.hh
PrePostProcessingSubSystem.cxx
PrePostProcessingSubSystem.hh
ProxyDofIterator.hh
QualifiedName.cxx
QualifiedName.hh
RadiationLibrary.cxx
RadiationLibrary.hh
RelativeNormAndMaxIter.cxx
RelativeNormAndMaxIter.hh
RelativeNormAndMaxSubIter.cxx
RelativeNormAndMaxSubIter.hh
SERComputeCFL.cxx
SERComputeCFL.hh
SetElementStateCoord.cxx
SetElementStateCoord.hh
SimulationStatus.cxx
SimulationStatus.hh
Simulator.cxx
Simulator.hh
SMaestro.cxx
SMaestro.hh
SocketBundleSetter.hh
SocketBundleSetter.cxx
SocketException.hh
SocketException.cxx
SourceVarSet.cxx
SourceVarSet.hh
SpaceMethod.cxx
SpaceMethodData.cxx
SpaceMethodData.hh
SpaceMethod.hh
StandardSubSystem.cxx
StandardSubSystem.hh
State.cxx
State.hh
StateInterpolator.cxx
StateInterpolator.hh
StencilComputerStrategy.hh
StdTrsGeoBuilder.cxx
StdTrsGeoBuilder.hh
StdTrsMultiGeoBuilder.cxx
StdTrsMultiGeoBuilder.hh
StopConditionController.cxx
StopConditionController.hh
StopConditionControllerLocal.cxx
StopConditionControllerLocal.hh
StopCondition.cxx
StopCondition.hh
Storage.hh
SubIterCustomSubSystem.cxx
SubIterCustomSubSystem.hh
SubSystem.ci
SubSystem.cxx
SubSystem.hh
SubSystemStatus.cxx
SubSystemStatus.hh
TopologicalRegion.cxx
TopologicalRegion.hh
TopologicalRegionSet.cxx
TopologicalRegionSet.hh
TRGeoConn.hh
TRSDistributeData.hh
TrsGeoWithNodesBuilder.cxx
TrsGeoWithNodesBuilder.hh
TRSInfo.hh
TrsMultiGeoWithNodesBuilder.cxx
TrsMultiGeoWithNodesBuilder.hh
TrsNotFoundException.hh
UniversalConstant.hh
VarRegistry.cxx
VarRegistry.hh
VarSetListT.hh
VarSetMatrixTransformer.cxx
VarSetMatrixTransformer.hh
VarSetTransformer.cxx
VarSetTransformer.hh
VectorialFunction.cxx
VectorialFunction.hh
VolumeCalculator.cxx
VolumeCalculator.hh
VolumeIntegrator.ci
VolumeIntegrator.cxx
VolumeIntegrator.hh
VolumeIntegratorImpl.cxx
VolumeIntegratorImpl.hh
WriteListMap.hh
WriteListMap.cxx
)

# compile some files with CUDA compiler
IF ( CF_HAVE_CUDA )
LIST ( APPEND Framework_files
     BlockAccumulatorBaseCUDA.hh
     CudaDeviceManager.cu
     CudaDeviceManager.hh
     CudaTimer.hh
)    
ENDIF ()

###########################################
# MPI
LIST ( APPEND OPTIONAL_dirfiles
       DataHandleMPI.hh
       MeshPartitioner.hh
       MeshPartitioner.cxx
       StopConditionControllerMPI.cxx
       StopConditionControllerMPI.hh
       PartitionerPeriodicTools.hh
       PartitionerPeriodicTools.cxx
       PartitionerData.hh
       ParMetis.cxx 
       ParMetis.hh 
)

IF(CF_HAVE_MPI)

  LIST ( APPEND Framework_files
         DataHandleMPI.hh
         GlobalReduceMPI.hh
	 MeshPartitioner.hh
         MeshPartitioner.cxx
	 ParFileWriter.cxx
	 ParFileWriter.hh
         StopConditionControllerMPI.cxx
         StopConditionControllerMPI.hh
       )

  IF ( CF_HAVE_PARMETIS )
    LIST ( APPEND Framework_files  
	   PartitionerPeriodicTools.hh
	   PartitionerPeriodicTools.cxx
	   PartitionerData.hh
	   ParMetis.cxx 
	   ParMetis.hh 
	 )
    LIST ( APPEND ${MYLIBNAME}_includedirs ${PARMETIS_INCLUDE_DIR} )
    LIST ( APPEND ${MYLIBNAME}_libs ${PARMETIS_LIBRARIES} )
  ENDIF ()

ENDIF()

# Add link to boost libraries: this was needed only on Genius cluster, may prove faulty on some other systems
LIST ( APPEND ${MYLIBNAME}_libs ${CF_Boost_LIBRARIES} )

###########################################
# Metis
#LIST ( APPEND OPTIONAL_dirfiles Metis.cxx Metis.hh)
#IF(CF_HAVE_METIS)
#  LIST ( APPEND Framework_files Metis.cxx Metis.hh )
#  LIST ( APPEND Framework_includedirs ${METIS_INCLUDE_DIR})
#  LIST ( APPEND Framework_libs ${METIS_LIBRARY})
#ENDIF(CF_HAVE_METIS)

IF ( NOT CF_HAVE_SINGLE_EXEC )
LIST ( APPEND Framework_cflibs Environment MathTools )
CF_ADD_KERNEL_LIBRARY ( Framework )
ELSE()
FOREACH (AFILE ${Framework_files} )
LIST(APPEND coolfluid-solver_files ../../src/Framework/${AFILE} )
ENDFOREACH(AFILE)

CF_CACHE_LIST_APPEND ( ${MYLIBNAME}_files  ${coolfluid-solver_files} )
CF_CACHE_LIST_APPEND ( ${MYLIBNAME}_libs  ${coolfluid-solver_libs} )
CF_CACHE_LIST_APPEND ( ${MYLIBNAME}_includedirs  ${coolfluid-solver_includedirs} )
ENDIF()

CF_WARN_ORPHAN_FILES()

